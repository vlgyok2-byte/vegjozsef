<!doctype html>
<html lang="hu">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gyakorló: jövő igeidők — Future Simple / Continuous / Perfect / Perfect Continuous</title>
<style>
  :root{--bg:#f6f8fb;--card:#fff;--accent:#0b74de;--good:#d4f8d4;--bad:#ffd6d6;--muted:#666}
  body{font-family:Inter,system-ui,Roboto,Arial;margin:18px;background:var(--bg);color:#111}
  h1{color:var(--accent);margin:0 0 6px;font-size:1.4rem}
  .card{background:var(--card);padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(12,24,40,.06);margin-bottom:12px;max-width:960px}
  .controls{display:flex;gap:8px;align-items:center;margin-bottom:12px;flex-wrap:wrap}
  button{background:var(--accent);color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
  button.ghost{background:#e9f2ff;color:var(--accent);border:1px solid #cfe4ff}
  .qcard{padding:12px;border-radius:8px;background:linear-gradient(180deg,#fff,#fbfdff);margin-bottom:10px;border:1px solid #eef6ff}
  .translation{font-style:italic;color:var(--muted);margin-top:6px}
  input[type=text]{padding:8px;border-radius:6px;border:1px solid #d1d7e0;width:100%;max-width:720px;box-sizing:border-box}
  .buttons{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
  .explain{background:#f0f8ff;padding:10px;border-left:4px solid var(--accent);border-radius:6px;margin-top:8px;display:none}
  .correct{border-left:6px solid #43b77a;background:#f0fff4}
  .wrong{border-left:6px solid #f26b6b;background:#fff5f5}
  #summary{display:none;margin-top:12px;padding:12px;background:#fff;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,0.04)}
  .wrongList p{margin:8px 0;padding:8px;background:#fff5f5;border-radius:6px}
  .statsRow{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px}
  .small{font-size:.9rem;color:var(--muted)}
  @media(max-width:640px){input[type=text]{width:100%}}
</style>
</head>
<body>
  <div class="card">
    <h1>Gyakorló: jövő igeidők</h1>
    <p class="small">Időtartam: <strong>Future Simple, Future Continuous, Future Perfect, Future Perfect Continuous</strong>. Írd be a hiányzó igealakot (pl. <code>will call</code>, <code>will be studying</code>). Azonnal kapsz visszajelzést és magyarázatot. A „Következő” gomb új kérdést ad hozzá az oldal aljára; előzőek megmaradnak.</p>

    <div class="controls">
      <label style="display:flex;align-items:center;gap:8px"><input type="checkbox" id="shuffle" checked> <span class="small">Véletlenszerű sorrend</span></label>
      <div style="margin-left:auto" class="small">Kérdések száma: <span id="totalCount">0</span></div>
    </div>

    <div id="quizArea"></div>

    <div id="summary" class="card">
      <h3>Összegzés</h3>
      <div class="statsRow">
        <div><strong>Megjelenített:</strong> <span id="totalShown">0</span></div>
        <div><strong>Megválaszolt:</strong> <span id="answeredCount">0</span></div>
        <div><strong>Helyes:</strong> <span id="correctCount">0</span></div>
        <div><strong>Százalék:</strong> <span id="percent">0%</span></div>
      </div>
      <div id="wrongBlock"></div>
      <div style="margin-top:10px"><button id="restartBtn" class="ghost">Újrakezd</button></div>
    </div>
  </div>

<script>
/* ====== Kérdésbank (20 tétel: 5-5 minden igeidőből) ====== */
const BANK = [
  /* Future Simple */
  { q: "I ______ (call) you tomorrow.", a: ["will call"], tense:"Future Simple", hu: "Holnap fel foglak hívni.", explain: "Future Simple — will + alapige. Gyors döntés, ígéret, jövőbeli tény." },
  { q: "She ______ (arrive) next week.", a: ["will arrive"], tense:"Future Simple", hu: "A jövő héten érkezik.", explain: "Future Simple — will + ige." },
  { q: "They ______ (not / come) to the party.", a: ["will not come","won't come"], tense:"Future Simple", hu: "Nem fognak eljönni a buliba.", explain: "Tagadás: will not / won't + alapige." },
  { q: "_____ you ______ (help) me with this?", a: ["will you help","will you help me"], tense:"Future Simple", hu: "Segítesz nekem ezzel?", explain: "Kérdés: will + alany + ige." },
  { q: "We ______ (be) there soon.", a: ["will be"], tense:"Future Simple", hu: "Hamarosan ott leszünk.", explain: "Future Simple — will + ige (állapot a jövőben)." },
  { q: "I ______ (call) you tomorrow.", a: ["will call"], tense:"Future Simple", hu: "Holnap fel foglak hívni.", explain: "Future Simple — will + alapige. Gyors döntés, ígéret, jövőbeli tény." },
  { q: "She ______ (arrive) next week.", a: ["will arrive"], tense:"Future Simple", hu: "A jövő héten érkezik.", explain: "Future Simple — will + ige." },
  { q: "They ______ (not / come) to the party.", a: ["will not come","won't come"], tense:"Future Simple", hu: "Nem fognak eljönni a buliba.", explain: "Tagadás: will not / won't + alapige." },
  { q: "_____ you ______ (help) me with this?", a: ["will you help","will you help me"], tense:"Future Simple", hu: "Segítesz nekem ezzel?", explain: "Kérdés: will + alany + ige." },
  { q: "We ______ (be) there soon.", a: ["will be"], tense:"Future Simple", hu: "Hamarosan ott leszünk.", explain: "Future Simple — will + ige (állapot a jövőben)." },


  /* Future Continuous */
  { q: "This time tomorrow, I ______ (travel) to London.", a: ["will be travelling","will be traveling"], tense:"Future Continuous", hu: "Holnap ilyenkor London felé utazom.", explain: "Future Continuous — will be + -ing; jövőbeni folyamat egy adott időpontban." },
  { q: "At 8 pm she ______ (study).", a: ["will be studying"], tense:"Future Continuous", hu: "Este 8-kor tanulni fog.", explain: "Future Continuous — will be + -ing." },
  { q: "They ______ (not / watch) TV when we arrive.", a: ["will not be watching","won't be watching"], tense:"Future Continuous", hu: "Nem fognak tévét nézni, amikor megérkezünk.", explain: "Tagadás: will not be + -ing." },
  { q: "What ______ you ______ (do) at 9 o'clock?", a: ["will you be doing","what will you be doing"], tense:"Future Continuous", hu: "Mit fogsz csinálni 9-kor?", explain: "Kérdés: will + alany + be + -ing." },
  { q: "At lunchtime he ______ (have) a meeting.", a: ["will be having"], tense:"Future Continuous", hu: "Ebédidőben egy megbeszélése lesz.", explain: "Future Continuous — jövőbeli folyamat, will be + -ing." },
  { q: "This time tomorrow, I ______ (travel) to London.", a: ["will be travelling","will be traveling"], tense:"Future Continuous", hu: "Holnap ilyenkor London felé utazom.", explain: "Future Continuous — will be + -ing; jövőbeni folyamat egy adott időpontban." },
  { q: "At 8 pm she ______ (study).", a: ["will be studying"], tense:"Future Continuous", hu: "Este 8-kor tanulni fog.", explain: "Future Continuous — will be + -ing." },
  { q: "They ______ (not / watch) TV when we arrive.", a: ["will not be watching","won't be watching"], tense:"Future Continuous", hu: "Nem fognak tévét nézni, amikor megérkezünk.", explain: "Tagadás: will not be + -ing." },
  { q: "What ______ you ______ (do) at 9 o'clock?", a: ["will you be doing","what will you be doing"], tense:"Future Continuous", hu: "Mit fogsz csinálni 9-kor?", explain: "Kérdés: will + alany + be + -ing." },
  { q: "At lunchtime he ______ (have) a meeting.", a: ["will be having"], tense:"Future Continuous", hu: "Ebédidőben egy megbeszélése lesz.", explain: "Future Continuous — jövőbeli folyamat, will be + -ing." },
  

  /* Future Perfect */
  { q: "By 6 pm I ______ (finish) the report.", a: ["will have finished"], tense:"Future Perfect", hu: "6-ra be fogom fejezni a jelentést.", explain: "Future Perfect — will have + past participle; befejezett cselekvés egy jövőbeli pont előtt." },
  { q: "By next month she ______ (complete) the course.", a: ["will have completed"], tense:"Future Perfect", hu: "Jövő hónapra be fogja fejezni a kurzust.", explain: "Future Perfect — will have + ige 3. alakja." },
  { q: "He ______ (not / finish) before dinner.", a: ["will not have finished","won't have finished"], tense:"Future Perfect", hu: "Nem fog befejezni vacsora előtt.", explain: "Tagadás: will not have + past participle." },
  { q: "By the time you read this, I ______ (leave).", a: ["will have left"], tense:"Future Perfect", hu: "Mire ezt elolvasod, el fogok menni.", explain: "Future Perfect — cselekvés egy jövőbeli időpont előtt befejeződik." },
  { q: "They ______ (already / arrive) by 9.", a: ["will have already arrived","will have arrived already"], tense:"Future Perfect", hu: "9-re már meg fognak érkezni.", explain: "Future Perfect — gyakran used with 'by' and time expressions." },
  { q: "By 6 pm I ______ (finish) the report.", a: ["will have finished"], tense:"Future Perfect", hu: "6-ra be fogom fejezni a jelentést.", explain: "Future Perfect — will have + past participle; befejezett cselekvés egy jövőbeli pont előtt." },
  { q: "By next month she ______ (complete) the course.", a: ["will have completed"], tense:"Future Perfect", hu: "Jövő hónapra be fogja fejezni a kurzust.", explain: "Future Perfect — will have + ige 3. alakja." },
  { q: "He ______ (not / finish) before dinner.", a: ["will not have finished","won't have finished"], tense:"Future Perfect", hu: "Nem fog befejezni vacsora előtt.", explain: "Tagadás: will not have + past participle." },
  { q: "By the time you read this, I ______ (leave).", a: ["will have left"], tense:"Future Perfect", hu: "Mire ezt elolvasod, el fogok menni.", explain: "Future Perfect — cselekvés egy jövőbeli időpont előtt befejeződik." },
  { q: "They ______ (already / arrive) by 9.", a: ["will have already arrived","will have arrived already"], tense:"Future Perfect", hu: "9-re már meg fognak érkezni.", explain: "Future Perfect — gyakran used with 'by' and time expressions." },

  /* Future Perfect Continuous */
  { q: "By next year, I ______ (work) here for five years.", a: ["will have been working"], tense:"Future Perfect Continuous", hu: "Jövőre már öt éve fogok itt dolgozni.", explain: "Future Perfect Continuous — will have been + -ing; hangsúly a folyamat hosszán egy jövőbeli időpontig." },
  { q: "When you arrive she ______ (study) for two hours.", a: ["will have been studying"], tense:"Future Perfect Continuous", hu: "Mire megérkezel, két órája fog tanulni.", explain: "Future Perfect Continuous — egy jövőbeli pontig folyamatban lévő cselekvés." },
  { q: "By 2030 they ______ (live) in London for ten years.", a: ["will have been living"], tense:"Future Perfect Continuous", hu: "2030-ra már tíz éve fognak Londonban élni.", explain: "Future Perfect Continuous — will have been + -ing; hangsúly a hosszúságon." },
  { q: "By the time you retire I ______ (teach) for 35 years.", a: ["will have been teaching"], tense:"Future Perfect Continuous", hu: "Mire nyugdíjba mész, 35 éve fogok tanítani.", explain: "Future Perfect Continuous — időtartamot hangsúlyoz egy jövőbeli ponthoz képest." },
  { q: "Next June she ______ (practice) the piano for ten years.", a: ["will have been practicing","will have been practising"], tense:"Future Perfect Continuous", hu: "Jövő júniusra már tíz éve fog zongorázni.", explain: "Future Perfect Continuous — brit/amerikai spelling variations for -ise/-ize." },
    { q: "By next year, I ______ (work) here for five years.", a: ["will have been working"], tense:"Future Perfect Continuous", hu: "Jövőre már öt éve fogok itt dolgozni.", explain: "Future Perfect Continuous — will have been + -ing; hangsúly a folyamat hosszán egy jövőbeli időpontig." },
  { q: "When you arrive she ______ (study) for two hours.", a: ["will have been studying"], tense:"Future Perfect Continuous", hu: "Mire megérkezel, két órája fog tanulni.", explain: "Future Perfect Continuous — egy jövőbeli pontig folyamatban lévő cselekvés." },
  { q: "By 2030 they ______ (live) in London for ten years.", a: ["will have been living"], tense:"Future Perfect Continuous", hu: "2030-ra már tíz éve fognak Londonban élni.", explain: "Future Perfect Continuous — will have been + -ing; hangsúly a hosszúságon." },
  { q: "By the time you retire I ______ (teach) for 35 years.", a: ["will have been teaching"], tense:"Future Perfect Continuous", hu: "Mire nyugdíjba mész, 35 éve fogok tanítani.", explain: "Future Perfect Continuous — időtartamot hangsúlyoz egy jövőbeli ponthoz képest." },
  { q: "Next June she ______ (practice) the piano for ten years.", a: ["will have been practicing","will have been practising"], tense:"Future Perfect Continuous", hu: "Jövő júniusra már tíz éve fog zongorázni.", explain: "Future Perfect Continuous — brit/amerikai spelling variations for -ise/-ize." }
];

/* ====== logika ====== */
let pool = [];
let shown = [];    // store indices in pool that were rendered
let answers = {};  // idx in pool -> {user, ok, correct, q, hu, explain, tense}

function normalize(s){ return (s||'').toString().trim().toLowerCase().replace(/\s+/g,' '); }

function preparePool(){
  pool = BANK.map((t,i)=> ({...t, orig:i}));
  if(document.getElementById('shuffle').checked) pool = shuffle(pool);
  shown = [];
  answers = {};
  document.getElementById('quizArea').innerHTML = '';
  document.getElementById('summary').style.display = 'none';
  document.getElementById('totalCount').textContent = pool.length;
  updateSummaryCounts();
}

function shuffle(a){
  const b = a.slice();
  for(let i=b.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [b[i],b[j]]=[b[j],b[i]];
  }
  return b;
}

function renderNext(){
  if(pool.length===0) preparePool();
  const idx = shown.length;
  if(idx >= pool.length){ alert('Nincs több kérdés.'); return; }
  const item = pool[idx];
  const id = 'q'+idx;
  const wrapper = document.createElement('div');
  wrapper.className = 'qcard';
  wrapper.id = 'card-'+idx;
  wrapper.innerHTML = `
    <div><strong>${idx+1}.</strong> ${item.q} <span style="float:right;color:var(--muted)">${item.tense}</span></div>
    <div class="translation">${item.hu}</div>
    <div style="margin-top:8px"><input type="text" id="${id}" placeholder="Írd be a választ..."></div>
    <div class="buttons">
      <button type="button" onclick="checkSingle(${idx})">Ellenőrzés</button>
      <button type="button" onclick="renderNext()">Következő</button>
      <button type="button" onclick="finishTest()">Befejezem</button>
    </div>
    <div id="exp-${idx}" class="explain"></div>
  `;
  document.getElementById('quizArea').appendChild(wrapper);
  shown.push(idx);
  updateSummaryCounts();
}

function checkSingle(idx){
  const input = document.getElementById('q'+idx);
  const raw = (input.value||'').trim();
  const user = normalize(raw);
  const item = pool[idx];
  const corrects = (Array.isArray(item.a)? item.a : [item.a]).map(normalize);
  const expDiv = document.getElementById('exp-'+idx);
  const card = document.getElementById('card-'+idx);
  const ok = corrects.includes(user);
  answers[idx] = { user: raw, ok, correct: (Array.isArray(item.a)? item.a[0] : item.a), q: item.q, hu: item.hu, explain: item.explain, tense: item.tense };
  if(ok){
    card.classList.remove('wrong'); card.classList.add('correct');
    expDiv.style.display='block';
    expDiv.innerHTML = `<strong style="color:green">Helyes.</strong> <div style="margin-top:6px">${item.explain}</div>`;
  } else {
    card.classList.remove('correct'); card.classList.add('wrong');
    expDiv.style.display='block';
    expDiv.innerHTML = `<strong style="color:red">Helytelen.</strong> Helyes válasz: <b>${answers[idx].correct}</b><div style="margin-top:6px">${item.explain}</div>`;
    // optionally show the correct answer in the input (commented out)
    // input.value = raw + ' → ' + answers[idx].correct;
  }
  updateSummaryCounts();
}

function updateSummaryCounts(){
  const totalShown = shown.length;
  const answeredCount = Object.keys(answers).length;
  const correctCount = Object.values(answers).filter(x=>x.ok).length;
  document.getElementById('totalShown').textContent = totalShown;
  document.getElementById('answeredCount').textContent = answeredCount;
  document.getElementById('correctCount').textContent = correctCount;
  const pct = answeredCount===0?0:Math.round((correctCount/answeredCount)*100);
  document.getElementById('percent').textContent = pct+'%';
  document.getElementById('totalCount').textContent = pool.length;
}

function finishTest(){
  // ensure any unanswered but filled fields are recorded
  shown.forEach(idx=>{
    if(!answers[idx]){
      const raw = (document.getElementById('q'+idx)?.value||'').trim();
      const user = normalize(raw);
      const item = pool[idx];
      const corrects = (Array.isArray(item.a)? item.a : [item.a]).map(normalize);
      const ok = corrects.includes(user);
      answers[idx] = { user: raw, ok, correct: (Array.isArray(item.a)? item.a[0] : item.a), q: item.q, hu: item.hu, explain: item.explain, tense: item.tense };
      const expDiv = document.getElementById('exp-'+idx);
      const card = document.getElementById('card-'+idx);
      if(ok){
        card.classList.add('correct');
        expDiv.style.display='block';
        expDiv.innerHTML = `<strong style="color:green">Helyes.</strong> <div style="margin-top:6px">${item.explain}</div>`;
      } else {
        card.classList.add('wrong');
        expDiv.style.display='block';
        expDiv.innerHTML = `<strong style="color:red">Helytelen.</strong> Helyes válasz: <b>${answers[idx].correct}</b><div style="margin-top:6px">${item.explain}</div>`;
      }
    }
  });
  // compile wrongs
  const answeredCount = Object.keys(answers).length;
  const correctCount = Object.values(answers).filter(x=>x.ok).length;
  const pct = answeredCount===0?0:Math.round((correctCount/answeredCount)*100);
  document.getElementById('answeredCount').textContent = answeredCount;
  document.getElementById('correctCount').textContent = correctCount;
  document.getElementById('percent').textContent = pct+'%';

  const wrongs = Object.values(answers).filter(x=>!x.ok);
  const wrongBlock = document.getElementById('wrongBlock');
  wrongBlock.innerHTML = '';
  if(wrongs.length){
    wrongBlock.innerHTML = '<h4>Hibás válaszok (javított listával):</h4><div class="wrongList">';
    wrongs.forEach((w,i)=>{
      wrongBlock.innerHTML += `<p><strong>${i+1}.</strong> ${w.q}<br><em>${w.hu}</em><br><strong>Te:</strong> ${w.user || '(üres)'}<br><strong>Helyes:</strong> ${w.correct}<br><small style="display:block;margin-top:6px">${w.explain}</small></p>`;
    });
    wrongBlock.innerHTML += '</div>';
  } else {
    wrongBlock.innerHTML = '<p>Gratulálok! Minden megadott válasz helyes volt.</p>';
  }

  document.getElementById('summary').style.display = 'block';
  // disable next button by disabling creation of new questions
  // (the user may still interact with existing cards)
  document.querySelectorAll('button').forEach(b=>{
    if(b.textContent.trim()==='Következő') b.disabled = true;
  });
}

function restart(){
  document.querySelectorAll('button').forEach(b=>b.disabled=false);
  preparePool();
  renderNext();
}

document.getElementById('shuffle').addEventListener('change', ()=>{
  // re-prepare pool but keep existing display cleared
  preparePool();
  renderNext();
});

document.getElementById('restartBtn').addEventListener('click', restart);

// init
preparePool();
renderNext();

</script>
</body>
</html>
